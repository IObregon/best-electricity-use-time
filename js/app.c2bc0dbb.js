(function(){"use strict";var e={5879:function(e,t,n){var a=n(9242),r=n(3396);const o={class:"container"},i={key:0},u={key:1},l=(0,r._)("span",null,"Todavia no estan disponibles los precios de mañana.",-1),c=[l],s={class:"hoursPicker"},d=(0,r._)("article",null,[(0,r.Uk)("Selecciona el numero de horas que estara en funcionamiento. Por ejemplo:"),(0,r._)("br"),(0,r.Uk)(" Lavadoras 2.5 horas"),(0,r._)("br"),(0,r.Uk)(" Lavavajillas 3.5 horas"),(0,r._)("br")],-1);function p(e,t,n,l,p,v){const f=(0,r.up)("custom-datepicker"),m=(0,r.up)("VisualizeData");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(f,{"onUpdate:modelValue":t[0]||(t[0]=e=>l.picked=e)}),!l.loading&&!l.error&&l.data&&l.data.length?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(m,{data:l.data,startIndex:l.bestIndex,endIndex:Math.ceil(l.bestIndex+l.hours-1)},null,8,["data","startIndex","endIndex"])])):(0,r.kq)("",!0),l.error?((0,r.wg)(),(0,r.iD)("div",u,c)):(0,r.kq)("",!0),(0,r._)("div",s,[d,(0,r.wy)((0,r._)("input",{type:"number",step:"0.5",min:"0",max:"20","onUpdate:modelValue":t[1]||(t[1]=e=>l.hours=e)},null,512),[[a.nr,l.hours]])])])}const v=e=>((0,r.dD)("data-v-7899d5b4"),e=e(),(0,r.Cn)(),e),f={class:"container"},m=v((()=>(0,r._)("div",null,[(0,r._)("span",null,"Hora => "),(0,r._)("span",null," Precio")],-1)));function h(e,t,n,a,o,i){const u=(0,r.up)("data-row");return(0,r.wg)(),(0,r.iD)("div",f,[m,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.data,((e,t)=>((0,r.wg)(),(0,r.j4)(u,{key:e.Hora,data:e,isSelected:t>=n.startIndex&&t<=n.endIndex},null,8,["data","isSelected"])))),128))])}var b=n(7139);const _=e=>((0,r.dD)("data-v-5c10b5f0"),e=e(),(0,r.Cn)(),e),k=_((()=>(0,r._)("span",null," €/kWh ",-1)));function w(e,t,n,a,o,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,b.C_)(["dataRow",n.isSelected?"marked":""])},[(0,r._)("span",null,(0,b.zw)(a.hour)+" h => ",1),(0,r._)("span",null,(0,b.zw)(a.value),1),k],2)}var D=n(4870),g={name:"DataRow",props:{data:{type:Object},isSelected:Boolean},setup(e){const t=(0,D.iH)(e.data.Hora.split("-")[0]),n=(0,D.iH)(e.data.PCB);return{hour:t,value:n}}},x=n(89);const y=(0,x.Z)(g,[["render",w],["__scopeId","data-v-5c10b5f0"]]);var I=y,j={name:"VisualizeData",components:{DataRow:I},props:{data:{type:Array},startIndex:Number,endIndex:Number}};const C=(0,x.Z)(j,[["render",h],["__scopeId","data-v-7899d5b4"]]);var H=C;const P=e=>((0,r.dD)("data-v-78c110fe"),e=e(),(0,r.Cn)(),e),O={class:"date_picker_container"},V=P((()=>(0,r._)("span",null," Seleccione la fecha:",-1)));function S(e,t,n,a,o,i){const u=(0,r.up)("datepicker");return(0,r.wg)(),(0,r.iD)("div",O,[V,(0,r.Wm)(u,{modelValue:a.picked,"onUpdate:modelValue":t[0]||(t[0]=e=>a.picked=e),"upper-limit":a.upperLimit},null,8,["modelValue","upper-limit"])])}var L=n(2239),U={name:"CustomDatepicker",components:{Datepicker:L.Z},setup(e,{emit:t}){const n=new Date,a=(0,D.iH)(n),o=new Date(n);o.setDate(o.getDate()+1);const i=(0,D.iH)(o);return(0,r.YP)((()=>a.value),(e=>{t("update:modelValue",e)})),{picked:a,upperLimit:i}}};const z=(0,x.Z)(U,[["render",S],["__scopeId","data-v-78c110fe"]]);var B=z,F={name:"App",components:{CustomDatepicker:B,VisualizeData:H},setup(){const e=(0,D.iH)(null),t=(0,D.iH)(null),n=(0,D.iH)(!0),a=(0,D.iH)(!1),o=(0,D.iH)(0),i=(0,r.Fl)((()=>{if(!t.value||!o.value)return-1;const e=[];let n=0;for(let r=0;r<t.value.length-Math.ceil(o.value);r++){for(let e=r;e<r+Math.ceil(o.value);e++)n+=Number(t.value[e].PCB);e.push(n.toFixed(5)),n=0}const a=Math.min(...e).toFixed(5);return e.findIndex((e=>e===a))})),u=e=>(n.value=!0,a.value=!1,fetch(`https://api.esios.ree.es/archives/70/download_json?locale=en&date=${e}`,{method:"get",headers:{"content-type":"application/json"}}).then((e=>e.json())).then((e=>e.PVPC)).then((e=>(t.value=e.map((e=>(e.PCB=(e.PCB.replace(",",".")/1e3).toFixed(5),e))),e))).catch((()=>a.value=!0)).finally((()=>n.value=!1)));return(0,r.YP)((()=>e.value),(e=>{u(e.toLocaleDateString().split("T")[0])})),(0,r.bv)((()=>u((new Date).toLocaleDateString().split("T")[0]))),{data:t,loading:n,error:a,hours:o,bestIndex:i,picked:e}}};const M=(0,x.Z)(F,[["render",p]]);var T=M;(0,a.ri)(T).mount("#app")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,o){if(!a){var i=1/0;for(s=0;s<e.length;s++){a=e[s][0],r=e[s][1],o=e[s][2];for(var u=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(u=!1,o<i&&(i=o));if(u){e.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[a,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,i=a[0],u=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(l)var s=l(n)}for(t&&t(a);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(s)},a=self["webpackChunkbest_electricity_use_time"]=self["webpackChunkbest_electricity_use_time"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5879)}));a=n.O(a)})();
//# sourceMappingURL=app.c2bc0dbb.js.map