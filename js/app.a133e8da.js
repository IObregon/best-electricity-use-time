(function(){"use strict";var e={5222:function(e,t,n){var a=n(9242),r=n(3396);const o={class:"container"},i={key:0};function u(e,t,n,u,l,d){const s=(0,r.up)("datepicker"),c=(0,r.up)("VisualizeData");return(0,r.wg)(),(0,r.iD)("div",o,[!u.loading&&u.data&&u.data.length?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(s,{modelValue:u.picked,"onUpdate:modelValue":t[0]||(t[0]=e=>u.picked=e),"upper-limit":u.upperLimit},null,8,["modelValue","upper-limit"]),(0,r.Wm)(c,{data:u.data,startIndex:u.bestIndex,endIndex:Math.ceil(u.bestIndex+u.hours-1)},null,8,["data","startIndex","endIndex"])])):(0,r.kq)("",!0),(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"number",step:"0.5",min:"0",max:"20","onUpdate:modelValue":t[1]||(t[1]=e=>u.hours=e)},null,512),[[a.nr,u.hours]])])])}const l=e=>((0,r.dD)("data-v-7899d5b4"),e=e(),(0,r.Cn)(),e),d={class:"container"},s=l((()=>(0,r._)("div",null,[(0,r._)("span",null,"Hora => "),(0,r._)("span",null," Precio")],-1)));function c(e,t,n,a,o,i){const u=(0,r.up)("data-row");return(0,r.wg)(),(0,r.iD)("div",d,[s,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.data,((e,t)=>((0,r.wg)(),(0,r.j4)(u,{key:e.Hora,data:e,isSelected:t>=n.startIndex&&t<=n.endIndex},null,8,["data","isSelected"])))),128))])}var p=n(7139);const f=e=>((0,r.dD)("data-v-126bed5f"),e=e(),(0,r.Cn)(),e),v=f((()=>(0,r._)("span",null," â‚¬/kWh ",-1)));function h(e,t,n,a,o,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,p.C_)(["dataRow",n.isSelected?"red":""])},[(0,r._)("span",null,(0,p.zw)(a.hour)+" h => ",1),(0,r._)("span",null,(0,p.zw)(a.value),1),v],2)}var m=n(4870),b={name:"DataRow",props:{data:{type:Object},isSelected:Boolean},setup(e){const t=(0,m.iH)(e.data.Hora.split("-")[0]),n=(0,m.iH)(e.data.PCB);return{hour:t,value:n}}},w=n(89);const g=(0,w.Z)(b,[["render",h],["__scopeId","data-v-126bed5f"]]);var _=g,x={name:"VisualizeData",components:{DataRow:_},props:{data:{type:Array},startIndex:Number,endIndex:Number}};const D=(0,w.Z)(x,[["render",c],["__scopeId","data-v-7899d5b4"]]);var y=D,k=n(2239),I={name:"App",components:{VisualizeData:y,Datepicker:k.Z},setup(){const e=(0,m.iH)(null),t=(0,m.iH)(!0),n=(0,m.iH)(0),a=new Date,o=(0,m.iH)(a),i=new Date(a);i.setDate(i.getDate()+1);const u=(0,m.iH)(i),l=(0,r.Fl)((()=>{if(!e.value||!n.value)return-1;const t=[];let a=0;for(let o=0;o<e.value.length-Math.ceil(n.value);o++){for(let t=o;t<o+Math.ceil(n.value);t++)a+=Number(e.value[t].PCB);t.push(a.toFixed(5)),a=0}const r=Math.min(...t).toFixed(5);return t.findIndex((e=>e===r))})),d=n=>(console.log(n),t.value=!0,fetch(`https://api.esios.ree.es/archives/70/download_json?locale=en&date=${n}`,{method:"get",headers:{"content-type":"application/json"}}).then((e=>e.json())).then((e=>e.PVPC)).then((t=>(e.value=t.map((e=>(e.PCB=(e.PCB.replace(",",".")/1e3).toFixed(5),e))),t))).finally((()=>t.value=!1)));return(0,r.YP)((()=>o.value),(e=>{d(e.toLocaleDateString().split("T")[0])})),(0,r.bv)((()=>d((new Date).toLocaleDateString().split("T")[0]))),{data:e,loading:t,hours:n,bestIndex:l,picked:o,upperLimit:u}}};const O=(0,w.Z)(I,[["render",u]]);var j=O;(0,a.ri)(j).mount("#app")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,o){if(!a){var i=1/0;for(s=0;s<e.length;s++){a=e[s][0],r=e[s][1],o=e[s][2];for(var u=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(u=!1,o<i&&(i=o));if(u){e.splice(s--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[a,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,i=a[0],u=a[1],l=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(l)var s=l(n)}for(t&&t(a);d<i.length;d++)o=i[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(s)},a=self["webpackChunkbest_electricity_use_time"]=self["webpackChunkbest_electricity_use_time"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5222)}));a=n.O(a)})();
//# sourceMappingURL=app.a133e8da.js.map